
# Домашнее задание к занятию "5.1. Введение в виртуализацию. Типы и функции гипервизоров. Обзор рынка вендоров и областей применения."

## Задача 1

Опишите кратко, как вы поняли: в чем основное отличие полной (аппаратной) виртуализации, паравиртуализации и виртуализации на основе ОС.

### Ответ:
 - **Полная *(аппаратная)* виртуализация** позволяет использовать ресурсы сервера, не устанавливая отдельную ОС, а настраивать работу через специальную *«прослойку»* между гостевой операционной системой на витруальных машинах и оборудованием – так называемый *«гипервизор»*. Полная виртуализация позволяет существенно увеличить быстродействие гостевых ОС, которую можно сравнить с производительностью невиртуализованной машины.

 - **Паравиртуализация** - для гипервизора данного типа, требуется установленная ОС на сервере, который предоставляет ей гостевой API, что позволяет ей общаться с гипервизором на более высоком уровне, обеспечивая более высокое быстродействие. До недавних пор основным недостатком паравиртуализации являлась необходимость модификации кода ОС, однако, с появлением аппаратной поддержки виртуализации, такой как `Intel VT` и `AMD-V`, стало возможным выполнение любых ОС без модификации ядра.

 - **Виртуализация уровня операционной системы** - так же требуется наличие ОС на сервере, обеспечивает разделение одного физического сервера на несколько защищенных виртуализированных частей *(контейнеров)*, которые по сути являются небольшими отдельными копиями хостовой ОС, что может экономить ресурсы. 
Возможен запуск ВМ только с идентичными версиями ядра ОС *(только с Linux или только Windows)*

## Задача 2

Выберите один из вариантов использования организации физических серверов, в зависимости от условий использования.

> Организация серверов:
> - физические сервера,
> - паравиртуализация,
> - виртуализация уровня ОС.

> Условия использования:
> - Высоконагруженная база данных, чувствительная к отказу.
> - Различные web-приложения.
> - Windows системы для использования бухгалтерским отделом.
> - Системы, выполняющие высокопроизводительные расчеты на GPU.


### Ответ: 
- **Высоконагруженная база данных, чувствительная к отказу:** </br>
 **Физические сервера** - в этом случае будет более высокая производительность, аппаратное решение даёт более быстрый ответ от СУБД на все запросы сокращает точки отказа в виде гипервизора, но для отказаустойчивости требуется дублирование серверов.
 **Виртуализация уровня ОС** - контейнеризация типа Docker или LXC упрощает администрирование и в зависимости от нагрузок серваре позволяет легко их масштабировать, возможность перенаправлять нагрузку по разным контейнерам, к примеру мастер оставить только на чтение, а запись вести в реплики.
- **Различные web-приложения:**
 **Виртуализация уровня ОС** - так же подходит контейнеризация типа Docker или LXC, упрощает администрирование, выше скорость масштабирования при необходимости расширения, проще проводить тестирование, нет жестких требований к аппаратным ресурсам.
- **Windows системы для использования бухгалтерским отделом:** </br>
 **Паравиртуализация** - виртуализации Hyper-V, так как де факто по стандарту бухгалтерия работает с 1С и MSSQL, проще формировать бэкапы (клонирование всей ВМ), возможность расширения ресурсов, простота развётрывания обслуживания, миграции.
- **Системы, выполняющие высокопроизводительные расчеты на GPU** </br>
 **Физические сервера** - так как требуется максимальная производительность и доступ к аппаратным ресурсам GPU, в случае виртуализации, часть ресурсов будет идти на работу гипервизора.

## Задача 3

Выберите подходящую систему управления виртуализацией для предложенного сценария. Детально опишите ваш выбор.

### Ответ:

- 100 виртуальных машин на базе Linux и Windows, общие задачи, нет особых требований. Преимущественно Windows based инфраструктура, требуется реализация программных балансировщиков нагрузки, репликации данных и автоматизированного механизма создания резервных копий.
VMWare ESXi - наличие балансировщиков нагрузки, репликация данных, автоматизация создания бэкапов, нет ограничений к выбору ОС ВМ, высокий уровень бозопасности, наличие хорошей поддержки

- Требуется наиболее производительное бесплатное open source решение для виртуализации небольшой (20-30 серверов) инфраструктуры на базе Linux и Windows виртуальных машин.
Proxmox с KVM - бесплатное решение, возможность собирать кластер, возможность запуска большинства ОС на ВМ, низкий порог входа, KVM является нативным для большинства ядер Linux, хорошая поддержка сообщества.

- Необходимо бесплатное, максимально совместимое и производительное решение для виртуализации Windows инфраструктуры.
Hyper-V - bмеет максимальную совместимость с Windows системами, хорошую производительность, проще формировать бэкапы (клонирование всей ВМ), возможность расширения ресурсов, простота развётрывания обслуживания, миграции. Как минус требуется лицензирование гостевых ОС Windows.

- Необходимо рабочее окружение для тестирования программного продукта на нескольких дистрибутивах Linux.
Vagrant + Virtual Box - простота в создании, развёртывании, настройке, удаления ВМ. 

## Задача 4

Опишите возможные проблемы и недостатки гетерогенной среды виртуализации (использования нескольких систем управления виртуализацией одновременно) и что необходимо сделать для минимизации этих рисков и проблем. Если бы у вас был выбор, то создавали бы вы гетерогенную среду или нет? Мотивируйте ваш ответ примерами.

### Ответ:
&nbsp;&nbsp;&nbsp;&nbsp;Для поддержания гетерогенной среды виртуализации, потребуются больше квалифицированных спциалистов, под отдельные платформы и среды виртуализации, в случае если данного разделения нет, может привести к тому что система не будет правильно обслуживаться, ввиду сложности освоения всего стека технологий сразу. Возможны большие затраты, цена обслуживания гетерогенной среды будет больше, чем гомогенной, как лицензирование, дополнительное оборудование и ЗП сотрудникам, конечно есть и возможность экономии, к примеру если основная база может использовать коммерческие продукты, с лицензтрованием, а для тестового стенда можно использовать и Open source. Увеличение времени на тестирование, так как требуется проверка для большего числа платформ. Усложнение управление ресурсами среды, есть риск возникновения конфликтов между платформами.  
&nbsp;&nbsp;&nbsp;&nbsp;Для минимизации рисков для разных сред лучше формировать отдельные команды (поддержки/разработки), так же нужно разделить системы по сферам использования, либо использовать разные типы виртуализации в среде.   
&nbsp;&nbsp;&nbsp;&nbsp;В идеале хотелось бы использовать гомогенную структуру, но из-за ограничения функционала любой платформы, это выполнить не возможно и требуется использовать гетерогенную среду виртуализации, так как разные среды имеют и свои преимущества, вопрос как в финансах, простоте эксплаутации, скорости развёртывания, простоте освоения, надёжности, либо наличием каких-то корпоративных стандартов.   
