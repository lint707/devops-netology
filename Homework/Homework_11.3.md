# Домашнее задание к занятию "Микросервисы: подходы"

Вы работаете в крупной компанию, которая строит систему на основе микросервисной архитектуры.  
Вам как DevOps специалисту необходимо выдвинуть предложение по организации инфраструктуры, для разработки и эксплуатации.  


## Задача 1: Обеспечить разработку  

Предложите решение для обеспечения процесса разработки: хранение исходного кода, непрерывная интеграция и непрерывная поставка. 
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

#### Ответ:  
Связка `Kubernetes` + `Gitlab` + `Jenkins` + `Vault`.  
`Kubernetes` - можно отнести к одному из стандартных решений облачной системы на рынке.  
`Gitlab` + `Jenkins` - включает в себя системы контроля версий и сборочной линии, наличие репозитория. Проверяет покрытие кода, инспектирует и выявляет дубликаты, создает историю изменений. Поддерживает запуск нескольких сборок и тестов для различных платформ и окружений. Поддерживает интеграцию со многими облачными платформами.  
`Vault` - использовать для хранения секретов/паролей/ключей.  

## Задача 2: Логи  

Предложите решение для обеспечения сбора и анализа логов сервисов в микросервисной архитектуре.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

#### Ответ:
Для данного решения больше подходит `ELK`, преимущества масштабируемость, относительная простота, отказоустойчивость, гибкость, универсальность (работает со множеством источником данных).  
Сбор на конечных узлах: `Filebeat` - агент, собирающий данные с машины и направляющий в `Logstash/Elasticsearch`.  
Агрегация логов: `Logstash` - служба орабатывающая данные: фильтрует, парсит на составляющие поля, агрегирует строки, обогащает данные при необходимости и т.п. передает данные в системы потребители при необходимости.  
Сбор логов: `ElasticSearch` - инструмент аналитики и полнотекстового поиска, позволяет хранить, оперативно получать нужные данные больших объемов.  
Пользовательский интерфейс: `Kibana` - является средством визуализации данных логов, позволяет управлять индексами Elasticsearch, 
выполнять непосредственный визуальный поиск, строить Dashbord-ы для удобства оперативного анализа логов(данных).  

## Задача 3: Мониторинг

Предложите решение для обеспечения сбора и анализа состояния хостов и сервисов в микросервисной архитектуре.
Решение может состоять из одного или нескольких программных продуктов и должно описывать способы и принципы их взаимодействия.

#### Ответ:
Для данного решения больше подходит связка `Prometheus` + `Grafana`.  
Сбор метрик: `Prometheus` - решение для мониторинга с открытым исходным кодом для сбора и агрегирования метрик в виде временных рядов данных. Примущества в том что Prometeus более гибко настраивается, сам собирает метрики, хранит данные в TSDB, его можно легко маштабировать, активно развивается.  
Пользовательский интерфейс: `Grafana` - платформа с открытым исходным кодом для визуализации, мониторинга и анализа данных.
Позволяет визуализировать данные с систем мониторинга и большого числа разных метрик, простое управление, интеграция с различными системами и источниками данных, поддерживается комьюнити.

---
